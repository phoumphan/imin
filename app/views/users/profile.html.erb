<%content_for :head do%>
<script src="http://maps.google.com/maps?file=api&v=2&key=abcdefg&sensor=false"
        type="text/javascript">
</script>
<script src="http://gmaps-utility-library.googlecode.com/svn/trunk/markermanager/release/src/markermanager.js"
        type="text/javascript">
</script>
<script src="/javascripts/MapCommon.js"
        type="text/javascript">
</script>
<script type="text/javascript">

function initialize() {
  basic_init();

  pos = new GLatLng(<%= @lat %>, <%= @lng %>);
  map.addOverlay(new GMarker(pos));
  map.setCenter(pos, 17);
}

</script>
<%end%>

<% content_for :body_attributes do %>
  onLoad="initialize();"
  onUnload="GUnload();"
<% end %>



<%= render :partial => 'user_nav' %>
  
<div class="user_profile_container1">
  <div class="user_profile">
    <div id="wrapper">
      <%if @user%>
        <h2>Welcome <%=@user.login%>!</h2>

        

        <div id="user_info_container">

          <%= event_calendar %>
          <div id="user_left_col" >
            <input type="submit" class="btn" value="Hide Map &uarr;" id="hide_map" style="position: absolute; top: -50px; left: 370px; z-index: 1000; display: inline; border: none;" />
            <input type="submit" class="btn" value="Show Map &darr;" id="show_map" style="position: absolute; top: -50px; left: 370px; z-index: 1000; display: none;" />
            <div id="map_canvas" style="margin-top: -20px;"></div>
            <!-- List any Pending Friend Requests-->
            <!--user info-->
          </div>

          <div id="user_right_col">

            <!-- Profile picture, you can see where :small is defined by going to the User model file-->
            <div id="user_pic_container">
              <% if @user.photo.exists? then %>
                <%= image_tag @user.photo.url(:small) %>
              <%end%>
            </div>

            <div id="user_info">
              <strong>Email:</strong> <%=@user.email%><br /><br />
              <strong>Name:</strong>  <%=@user.name%><br /><br />
              <strong>Login:</strong>  <%=@user.login%><br /><br />
              <strong>Location:</strong>  <%=@user.location%><br />
              <%=link_to 'Edit Info', {:controller => 'users', :action => 'edit_info'}, :class => 'link_right'%>
            </div>
            <div id="weather">
              <%=@description%>
            </div>

            <div id="user_friend_requests">
              <%for requester in @user.pending_friend_requests%>
                <h3>Friend Requests</h3>
                <li><%=requester.requester.name%> has requested Friendship!
                  <%=link_to 'Confirm Friend!', friendships_path(:friend_id => requester.requester), :method => :post%></li>
              <%end%>
            </div>

          </div>

          

        </div>
      <%end%>

    </div>
  </div>
</div>
